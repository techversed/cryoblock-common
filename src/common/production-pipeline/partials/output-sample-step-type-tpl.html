<div class="container p-md">

    <h2 class="text-center font-bold m-b-lg">Specify Output Samples</h2>

    <div class="row" ng-if="!config.outputTemplateLoaded">
        <div class="col-xs-4">
            <button step-previous class='btn btn-default btn-block'>
                <i class="fa fa-arrow-left" />
                Back
            </button>
        </div>
        <div class="col-xs-4">
            <cb-dropdown
                cb-dropdown-info
                name='outputTemplateType'
                bind-to="name"
                ng-model="config.outputTemplateType"
                label="Download Template"
                items="['EXCEL']"
                cb-on-select="config.downloadOutputTemplate"
                cb-on-select-context="config"
                icon-class="fa fa-download"
                required
            >
            </cb-dropdown>
        </div>
        <div class="col-xs-4">
            <button ng-click="config.uploadOutputTemplate()" class='btn btn-primary btn-block'>
                <i class="fa fa-upload" />
                Upload
            </button>
        </div>
    </div>

    <div class="row" ng-if="config.outputTemplateLoaded">
        <div ng-if="!config.outputData.hasErrors">
            <div class="alert alert-success" role="alert">
                <i class="fa fa-check fa-2x text-success"/>
                <strong class="m-l-sm" style="font-size:1.1em;">Your CSV is valid! Click next to select sample storage locations or click back if you need to reupload your CSV.</strong>
            </div>
        </div>

        <div ng-if="config.outputData.hasErrors">
            <div class="alert alert-danger" role="alert">
                <i class="fa fa-exclamation-triangle fa-2x text-danger"/>
                <strong class="m-l-sm" style="font-size:1.1em;">Your CSV is invalid. Please review the errors below, update your CSV and reupload.</strong>
            </div>
        </div>
    </div>

    <div class="row" ng-if="config.outputTemplateLoaded">
        <div class="col-xs-4">
            <button step-previous class='btn btn-default btn-block'>
                <i class="fa fa-arrow-left" />
                Back
            </button>
        </div>
        <div class="col-xs-4">
            <button ng-click="config.uploadOutputTemplate()" class='btn btn-info btn-block'>
                <i class="fa fa-upload" />
                Reupload
            </button>
        </div>
        <div class="col-xs-4">
            <button step-next class='btn btn-primary btn-block' ng-disabled="config.outputData.hasErrors">
                <i class="fa fa-arrow-right" />
                Next
            </button>
        </div>
    </div>

    <div class="container p-md" ng-show="config.isUploading">
        <p class="text-center">
            <i class="text-primary fa fa-5x fa-circle-o-notch fa-spin"/>
        </p>
    </div>

</div>

<div class="panel-body no-padding" ng-if="!config.outputTemplateLoaded">
    <div class="grid-responsive-table">
        <div class="grid-overflow">
            <table class="table table-striped table-align-center">
                <thead>
                    <tr>
                        <th> Catalog</th>
                        <th> Description </th>
                        <th> Sample Type </th>
                        <th> Status </th>
                        <th> Lot </th>
                        <th> Storage Container </th>
                        <th> Donor </th>
                        <th> Target </th>
                        <th> Molecule </th>
                        <th> Tags </th>
                        <th> Concentration </th>
                        <th> Concentration Units </th>
                        <th> Volume </th>
                        <th> Volume Units </th>
                        <th> Division </th>
                        <th> Division Row </th>
                        <th> Division Column </th>
                    </tr>
                </thead>
                </tbody>
                    <tr>
                        <td><a ui-sref="catalog.index" target="_blank"> Catalog Name (new or existing catalog) </a></td>
                        <td> Description (any string) </td>
                        <td><a ui-sref="sample_type.index" target="_blank"> Sample Type (exact name) </a></td>
                        <td> Status (dropdown) </td>
                        <td> Lot (group samples) </td>
                        <td> Storage Container (dropdown) </td>
                        <td><a ui-sref="donor.index" target="_blank"> Donor ID (number) </a></td>
                        <td><a ui-sref="target.index" target="_blank"> Target ID (number) </a></td>
                        <td><a ui-sref="molecule.index" target="_blank"> Molecule ID (number) </a></td>
                        <td><a ui-sref="target.index" target="_blank"> Tag ID numbers i.e. (1,2,3) </a></td>
                        <td> Concentration (decimal) </td>
                        <td> Concentration units (dropdown) </td>
                        <td> Volume (decimal) </td>
                        <td> Volume units (dropdown) </td>
                        <td><a ui-sref="storage.division.detail({id:1})" target="_blank"> Division ID (in URL on box page) </a></td>
                        <td> Division Row (A,B,C) </td>
                        <td> Division Column (1,2,3) </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div ng-hide="isUploading">
    <grid ng-if="config.outputImportGrid" grid="config.outputImportGrid"></grid>
</div>
